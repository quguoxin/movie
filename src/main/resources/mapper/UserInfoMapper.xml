<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.movie.www.mapper.UserInfoMapper">

<select id="findUserByPhoneAndPassword" parameterType="com.movie.www.entity.UserInfo" resultType="com.movie.www.entity.UserInfo" >
    SELECT *  from userinfo WHERE phone=#{phone} and password=#{password}
</select>
<insert id="addUserInfo" parameterType="com.movie.www.entity.UserInfo" >
INSERT INTO `userinfo` (userName,phone,`password`,portrait) VALUES (#{userName},#{phone},#{password},#{portrait})
</insert>
<select id="findUserByPhone" parameterType="com.movie.www.entity.UserInfo" resultType="com.movie.www.entity.UserInfo">
    SELECT *  from userinfo WHERE phone=#{phone}
</select>
    <update id="updateUserInfoByUid" parameterType="com.movie.www.entity.UserInfo">
        UPDATE `userinfo` u
        <trim prefix="set" suffixOverrides=",">
            <if test="userName!='' and userName!=null">u.`userName`=#{userName},</if>
            <if test="sex!=0 ">u.`sex`=#{sex},</if>
            <if test="birthday!='' and birthday!=null">u.`birthday`=#{birthday},</if>
            <if test="portrait!='' and portrait!=null">u.portrait=#{portrait},</if>
        </trim>
         WHERE u.`uId`=#{uId}
    </update>
    <select id="findUserInfoByUid" parameterType="com.movie.www.entity.UserInfo" resultType="com.movie.www.entity.UserInfo">
        SELECT *  from userinfo WHERE uId=#{uId}
    </select>
</mapper>